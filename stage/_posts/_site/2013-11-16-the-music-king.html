<p>快收工的时候刷了下微博看到了有人很无聊地去统计了汪峰老师（没有黑他的意思，其实人家音乐还是很有力量的好吧）歌词的词频率。于是我想这得多有(wu)趣(liao)啊，于是就决定自己也统计下。于是的于是，我放弃了看TBBT的时间来给统计下汪峰老师的歌词。</p>

<p>要想统计就得有歌词啊，一个个找也不是懒人的风格，于是想到了<a href="http://www.xiami.com/">虾米</a>上是有歌词的，去抓下来就好了嘛，其实也很简单，把网页抓下来解析一下。以前这活都是给Pyhon干的，今天想想用R尝试下吧。R解析HTML应该可以用XML包，但是因为以前都是使用Python来解析HTML,所有XML包压根就没有用过，于是决定自己写正则表达式来完成吧。</p>

<h1 id="section">抓取歌词</h1>
<p>汪峰在虾米上的ID是887，使用<code class="highlighter-rouge">http://www.xiami.com/artist/album/id/887/d//p//page/1</code>的网址可以直接查看其专辑。</p>

<p>我们首先获得其专辑的信息，这里主要是名字和专辑的链接。</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></td><td class="code"><pre><span class="n">artistSearch</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"http://www.xiami.com/artist/album/id/887/d//p//page/1"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"http://www.xiami.com/artist/album/id/887/d//p//page/2"</span><span class="p">)</span><span class="w">
</span><span class="n">text</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">getURL</span><span class="p">(</span><span class="n">artistSearch</span><span class="p">)</span><span class="w">
</span><span class="n">m</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gregexpr</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"&lt;p class=\"name\"&gt;.*&lt;strong&gt;"</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">album</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">regmatches</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">)</span><span class="w">

</span><span class="c1">#取得专辑的名字
</span><span class="n">getName</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">text</span><span class="p">){</span><span class="w">
</span><span class="n">m</span><span class="o">=</span><span class="n">gregexpr</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"(?&lt;=title=\").*(?=\")"</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1">#需要使用正则的零宽度断言
</span><span class="nf">return</span><span class="p">(</span><span class="n">regmatches</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">#取得专辑的链接
</span><span class="n">getLink</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">text</span><span class="p">){</span><span class="w">
</span><span class="n">m</span><span class="o">=</span><span class="n">gregexpr</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"(?&lt;=href=\").*[0-9](?=\")"</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1">#需要使用正则的零宽度断言
</span><span class="nf">return</span><span class="p">(</span><span class="n">regmatches</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">#获得专辑的名字和链接
</span><span class="n">albumDetails</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">unname</span><span class="p">(</span><span class="n">unlist</span><span class="p">(</span><span class="n">sapply</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">ablum</span><span class="p">,</span><span class="n">FUN</span><span class="o">=</span><span class="n">getName</span><span class="p">,</span><span class="n">simplify</span><span class="o">=</span><span class="s2">"vector"</span><span class="p">))),</span><span class="w">
                          </span><span class="n">link</span><span class="o">=</span><span class="n">unname</span><span class="p">(</span><span class="n">unlist</span><span class="p">(</span><span class="n">sapply</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">ablum</span><span class="p">,</span><span class="n">FUN</span><span class="o">=</span><span class="n">getLink</span><span class="p">,</span><span class="n">simplify</span><span class="o">=</span><span class="s2">"vector"</span><span class="p">))))</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ablumDetial</span><span class="w">
                       </span><span class="n">name</span><span class="w">              </span><span class="n">link</span><span class="w">
					   </span><span class="m">1</span><span class="w">                  </span><span class="err">生来彷徨</span><span class="w">  </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">784338853</span><span class="w">
					   </span><span class="m">2</span><span class="w">                  </span><span class="err">一起摇摆</span><span class="w">  </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">580530673</span><span class="w">
					   </span><span class="m">3</span><span class="w">    </span><span class="err">汪峰</span><span class="m">2011</span><span class="err">生无所求演唱会</span><span class="w"> </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">2075241743</span><span class="w">
					   </span><span class="m">4</span><span class="w">                  </span><span class="err">生无所求</span><span class="w">     </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">478379</span><span class="w">
					   </span><span class="m">5</span><span class="w">              </span><span class="err">像梦一样自由</span><span class="w">     </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">432313</span><span class="w">
					   </span><span class="m">6</span><span class="w">            </span><span class="err">信仰在空中飘扬</span><span class="w">     </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">337989</span><span class="w">
					   </span><span class="m">7</span><span class="w">                  </span><span class="err">勇敢的心</span><span class="w">       </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">4423</span><span class="w">
					   </span><span class="m">8</span><span class="w">                </span><span class="err">怒放的生命</span><span class="w">       </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">4424</span><span class="w">
					   </span><span class="m">9</span><span class="w">  </span><span class="n">Live</span><span class="w"> </span><span class="n">In</span><span class="w"> </span><span class="n">Beijing</span><span class="w"> </span><span class="err">飞得更高</span><span class="w">       </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">4425</span><span class="w">
					   </span><span class="m">10</span><span class="w">                   </span><span class="err">笑着哭</span><span class="w">       </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">4426</span><span class="w">
					   </span><span class="m">11</span><span class="w">       </span><span class="err">爱是一颗幸福的子弹</span><span class="w">       </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">4427</span><span class="w">
					   </span><span class="m">12</span><span class="w">  </span><span class="err">十七岁的单车</span><span class="w"> </span><span class="err">电影原声带</span><span class="w">     </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">168383</span><span class="w">
					   </span><span class="m">13</span><span class="w">             </span><span class="err">花火</span><span class="p">(</span><span class="err">台湾版</span><span class="p">)</span><span class="w">     </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">374017</span><span class="w">
					   </span><span class="m">14</span><span class="w">                     </span><span class="err">花火</span><span class="w">       </span><span class="o">/</span><span class="n">album</span><span class="o">/</span><span class="m">4428</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>以上获得了专辑的名字和专辑的链接地址，接下来要做的就是去这个专辑中找到这些歌曲然后找到这些歌曲的歌词就可以了。</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></td><td class="code"><pre><span class="c1">#获取专辑中歌曲信息
</span><span class="n">getSongDetails</span><span class="w">  </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">ablumDetails</span><span class="p">){</span><span class="w">
</span><span class="n">text</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">getURL</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">paste0</span><span class="p">(</span><span class="s2">"http://www.xiami.com"</span><span class="p">,</span><span class="n">ablumDetails</span><span class="o">$</span><span class="n">link</span><span class="p">))</span><span class="w">
</span><span class="n">m</span><span class="o">=</span><span class="n">gregexpr</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"(?&lt;=&lt;td class=\"song_name\"&gt;).*?(?=&lt;/a&gt;)"</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1">#需要使用正则的零宽度断言 非贪婪
</span><span class="n">songs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">regmatches</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">)</span><span class="w">
</span><span class="c1">#获取歌曲名字
</span><span class="n">getName</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">text</span><span class="p">){</span><span class="w">
</span><span class="n">m</span><span class="o">=</span><span class="n">gregexpr</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"(?&lt;=title=\"\"&gt;).*"</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1">#需要使用正则的零宽度断言,
</span><span class="nf">return</span><span class="p">(</span><span class="n">regmatches</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="c1">#歌曲链接名字
</span><span class="n">getLink</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">text</span><span class="p">){</span><span class="w">
</span><span class="n">m</span><span class="o">=</span><span class="n">gregexpr</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"(?&lt;=&lt;a href=\").*[0-9](?=\")"</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1">#需要使用正则的零宽度断言
</span><span class="nf">return</span><span class="p">(</span><span class="n">regmatches</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="n">songDetails</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">  </span><span class="n">data.frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">unname</span><span class="p">(</span><span class="n">unlist</span><span class="p">(</span><span class="n">sapply</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">songs</span><span class="p">,</span><span class="n">FUN</span><span class="o">=</span><span class="n">getName</span><span class="p">,</span><span class="n">simplify</span><span class="o">=</span><span class="s2">"vector"</span><span class="p">))),</span><span class="w">
</span><span class="n">link</span><span class="o">=</span><span class="n">unname</span><span class="p">(</span><span class="n">unlist</span><span class="p">(</span><span class="n">sapply</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="n">songs</span><span class="p">,</span><span class="n">FUN</span><span class="o">=</span><span class="n">getLink</span><span class="p">,</span><span class="n">simplify</span><span class="o">=</span><span class="s2">"vector"</span><span class="p">))))</span><span class="w">
</span><span class="nf">return</span><span class="p">(</span><span class="n">songDetial</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">#获得歌曲的信息
</span><span class="n">songDetail</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">getSongDetail</span><span class="p">(</span><span class="n">ablumDetial</span><span class="p">)</span><span class="w">


</span><span class="c1">#获取歌词
</span><span class="n">getLrc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">songDetail</span><span class="p">){</span><span class="w">
</span><span class="n">text</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">getURL</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">paste0</span><span class="p">(</span><span class="s2">"http://www.xiami.com/"</span><span class="p">,</span><span class="n">songDetail</span><span class="o">$</span><span class="n">link</span><span class="p">))</span><span class="w">
</span><span class="n">m</span><span class="o">=</span><span class="n">gregexpr</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"(?&lt;=&lt;div class=\"lrc_main\"&gt;)[^..]*?(?=&lt;.div&gt;)"</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">perl</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1">#需要使用正则的零宽度断言 非贪婪 注意空行的匹配
</span><span class="n">lrc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">regmatches</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">)</span><span class="w">
</span><span class="n">lrc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"(\\s)"</span><span class="p">,</span><span class="n">replacement</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="n">lrc</span><span class="p">)</span><span class="w">
</span><span class="n">lrc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s2">"&lt;br/&gt;"</span><span class="p">,</span><span class="n">replacement</span><span class="o">=</span><span class="s2">"\n"</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="n">lrc</span><span class="p">)</span><span class="w">
</span><span class="nf">return</span><span class="p">(</span><span class="n">lrc</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">Lrc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">getLrc</span><span class="p">(</span><span class="n">songDetail</span><span class="p">)</span><span class="w">

</span><span class="c1">#把歌词的信息加入
</span><span class="n">songDetail</span><span class="o">$</span><span class="n">Lrc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Lrc</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> </span><span class="n">songDetail</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">
      </span><span class="n">name</span><span class="w">             </span><span class="n">link</span><span class="w">
	  </span><span class="m">1</span><span class="w"> </span><span class="err">生来彷徨</span><span class="w"> </span><span class="o">/</span><span class="n">song</span><span class="o">/</span><span class="m">1772331683</span><span class="w">
	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </span><span class="n">Lrc</span><span class="w">
																																																																																																																																																																																																 </span><span class="m">1</span><span class="w"> </span><span class="err">每天走在疯狂逐梦的大街上\</span><span class="n">n</span><span class="err">我们精神褴褛却又毫无倦意\</span><span class="n">n</span><span class="err">徘徊着寻找着那虚空的欢愉\</span><span class="n">n</span><span class="err">奔波着抗争着那无常的命运\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="err">朋友啊这生活会把你的心伤烂\</span><span class="n">n</span><span class="err">可它从来就不会有一丝怜悯\</span><span class="n">n</span><span class="err">再也别象个傻瓜一样的哭了\</span><span class="n">n</span><span class="err">因为象我们这样的人生来彷徨\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="err">传真机到炼钢厂有一万光年\</span><span class="n">n</span><span class="err">那只是我们失梦之路的起点\</span><span class="n">n</span><span class="err">妈妈你善良的孩子还没放弃\</span><span class="n">n</span><span class="err">他想在今夜的街上爱到死去\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="err">朋友啊这世界会将你的梦破败\</span><span class="n">n</span><span class="err">而它从来就不会有一丝同情\</span><span class="n">n</span><span class="err">再也别象个疯子一样的拼了\</span><span class="n">n</span><span class="err">因为象我们这样的人生来彷徨\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="err">路上散落着花朵般受伤的英雄\</span><span class="n">n</span><span class="err">如同我们一起挣扎着的那些片段\</span><span class="n">n</span><span class="err">明天我们是否活着却依然不在\</span><span class="n">n</span><span class="err">明天我们是否存在却迷惘依然\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="err">朋友啊这生活会把你的骨折断\</span><span class="n">n</span><span class="err">而它从来就只是在袖手旁观\</span><span class="n">n</span><span class="err">不如象一块石头一样的滚吧\</span><span class="n">n</span><span class="err">因为象我们这样的人生来彷徨\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="err">朋友啊这世界会将你的爱破灭\</span><span class="n">n</span><span class="err">而它从来就不会给一次拯救\</span><span class="n">n</span><span class="err">不如让我们一起放任自流吧\</span><span class="n">n</span><span class="err">反正象我们这样的人生来彷徨</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h1 id="section-1">分词</h1>

<p>接下来就是统计词频率了,分词使用分词包<a href="http://jliblog.com/app/rwordseg">Rwordseg</a>。</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></td><td class="code"><pre><span class="n">library</span><span class="p">(</span><span class="n">Rwordseg</span><span class="p">)</span><span class="w">
</span><span class="n">segWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">segmentCN</span><span class="p">(</span><span class="n">strwords</span><span class="o">=</span><span class="n">songDetail</span><span class="o">$</span><span class="n">Lrc</span><span class="p">,</span><span class="n">nature</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="n">segWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">segWords</span><span class="p">)</span><span class="w">
</span><span class="n">stopwords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.table</span><span class="p">(</span><span class="s2">"./Document/Temp/stopwords.txt"</span><span class="p">)</span><span class="w">
</span><span class="n">segWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">segWords</span><span class="p">[</span><span class="o">!</span><span class="n">segWords</span><span class="o">%in%</span><span class="nf">c</span><span class="p">(</span><span class="s2">"的"</span><span class="p">,</span><span class="s2">"是"</span><span class="p">,</span><span class="s2">"在"</span><span class="p">,</span><span class="s2">"也"</span><span class="p">,</span><span class="s2">"得"</span><span class="p">,</span><span class="s2">"地"</span><span class="p">,</span><span class="s2">"制作人"</span><span class="p">,</span><span class="s2">"录音师"</span><span class="p">)]</span><span class="w">

</span><span class="c1">#去掉ul
</span><span class="n">segWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">segWords</span><span class="p">[</span><span class="o">!</span><span class="nf">names</span><span class="p">(</span><span class="n">segWords</span><span class="p">)</span><span class="o">==</span><span class="s2">"ul"</span><span class="p">]</span><span class="w">
</span><span class="c1">#去掉uj
</span><span class="n">segWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">segWords</span><span class="p">[</span><span class="o">!</span><span class="nf">names</span><span class="p">(</span><span class="n">segWords</span><span class="p">)</span><span class="o">==</span><span class="s2">"uj"</span><span class="p">]</span><span class="w">


</span><span class="c1">#统计动词
</span><span class="n">verbWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">segWords</span><span class="p">[</span><span class="nf">names</span><span class="p">(</span><span class="n">segWords</span><span class="p">)</span><span class="o">==</span><span class="s2">"v"</span><span class="p">]</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">verbWords</span><span class="p">))</span><span class="w">
</span><span class="n">x</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">x</span><span class="o">$</span><span class="n">Freq</span><span class="p">,</span><span class="n">decreasing</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),][</span><span class="m">1</span><span class="o">:</span><span class="m">30</span><span class="p">,]</span><span class="w">

</span><span class="c1">#统计名词
</span><span class="n">nounWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">segWords</span><span class="p">[</span><span class="nf">names</span><span class="p">(</span><span class="n">segWords</span><span class="p">)</span><span class="o">==</span><span class="s2">"n"</span><span class="p">]</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">nounWords</span><span class="p">))</span><span class="w">
</span><span class="n">x</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">x</span><span class="o">$</span><span class="n">Freq</span><span class="p">,</span><span class="n">decreasing</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),][</span><span class="m">1</span><span class="o">:</span><span class="m">30</span><span class="p">,]</span><span class="w">

</span><span class="c1">#统计形容词/副词语
</span><span class="n">aWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">segWords</span><span class="p">[</span><span class="nf">names</span><span class="p">(</span><span class="n">segWords</span><span class="p">)</span><span class="o">==</span><span class="s2">"a"</span><span class="p">]</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">aWords</span><span class="p">))</span><span class="w">
</span><span class="n">x</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">x</span><span class="o">$</span><span class="n">Freq</span><span class="p">,</span><span class="n">decreasing</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),][</span><span class="m">1</span><span class="o">:</span><span class="m">30</span><span class="p">,]</span><span class="w">

</span><span class="c1">#统计量词
</span><span class="n">mWords</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">segWords</span><span class="p">[</span><span class="nf">names</span><span class="p">(</span><span class="n">segWords</span><span class="p">)</span><span class="o">==</span><span class="s2">"m"</span><span class="p">]</span><span class="w">
</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">table</span><span class="p">(</span><span class="n">mWords</span><span class="p">))</span><span class="w">
</span><span class="n">x</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">x</span><span class="o">$</span><span class="n">Freq</span><span class="p">,</span><span class="n">decreasing</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),][</span><span class="m">1</span><span class="o">:</span><span class="m">30</span><span class="p">,]</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h1 id="section-2">结果</h1>
<p>结果是基本上就是下面这样的</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre></td><td class="code"><pre><span class="o">#</span><span class="err">动词的统计</span>
   <span class="n">verbWords</span> <span class="n">Freq</span>
   <span class="mi">823</span>        <span class="err">像</span>  <span class="mi">227</span>
   <span class="mi">900</span>        <span class="err">有</span>  <span class="mi">191</span>
   <span class="mi">1</span>          <span class="err">爱</span>  <span class="mi">173</span>
   <span class="mi">340</span>        <span class="err">会</span>  <span class="mi">156</span>
   <span class="mi">515</span>      <span class="err">没有</span>  <span class="mi">146</span>
   <span class="mi">618</span>        <span class="err">让</span>  <span class="mi">135</span>
   <span class="mi">950</span>      <span class="err">知道</span>  <span class="mi">120</span>
   <span class="mi">162</span>        <span class="err">到</span>  <span class="mi">113</span>
   <span class="mi">868</span>        <span class="err">要</span>  <span class="mi">110</span>
   <span class="mi">149</span>        <span class="err">带</span>   <span class="mi">97</span>
   <span class="mi">426</span>        <span class="err">可</span>   <span class="mi">94</span>
   <span class="mi">816</span>        <span class="err">想</span>   <span class="mi">80</span>
   <span class="mi">493</span>      <span class="err">录音</span>   <span class="mi">76</span>
   <span class="mi">447</span>        <span class="err">来</span>   <span class="mi">73</span>
   <span class="mi">613</span>        <span class="err">去</span>   <span class="mi">73</span>
   <span class="mi">166</span>      <span class="err">等待</span>   <span class="mi">71</span>
   <span class="mi">341</span>        <span class="err">混</span>   <span class="mi">67</span>
   <span class="mi">120</span>      <span class="err">处理</span>   <span class="mi">64</span>
   <span class="mi">928</span>        <span class="err">找</span>   <span class="mi">57</span>
   <span class="mi">428</span>      <span class="err">可以</span>   <span class="mi">52</span>
   <span class="mi">538</span>        <span class="err">能</span>   <span class="mi">51</span>
   <span class="mi">433</span>      <span class="err">哭泣</span>   <span class="mi">49</span>
   <span class="mi">432</span>        <span class="err">哭</span>   <span class="mi">48</span>
   <span class="mi">785</span>        <span class="err">无</span>   <span class="mi">48</span>
   <span class="mi">986</span>        <span class="err">走</span>   <span class="mi">47</span>
   <span class="mi">913</span>      <span class="err">再见</span>   <span class="mi">44</span>
   <span class="mi">696</span>        <span class="err">说</span>   <span class="mi">41</span>
   <span class="mi">407</span>      <span class="err">觉得</span>   <span class="mi">39</span>
   <span class="mi">252</span>      <span class="err">感到</span>   <span class="mi">38</span>
   <span class="mi">585</span>      <span class="err">破碎</span>   <span class="mi">38</span>


<span class="o">#</span><span class="err">名词的统计</span>
<span class="n">nounWords</span> <span class="n">Freq</span>
<span class="mi">574</span>      <span class="err">生命</span>  <span class="mi">125</span>
<span class="mi">177</span>      <span class="err">感觉</span>  <span class="mi">118</span>
<span class="mi">526</span>        <span class="err">人</span>  <span class="mi">106</span>
<span class="mi">785</span>        <span class="err">音</span>   <span class="mi">94</span>
<span class="mi">692</span>        <span class="err">象</span>   <span class="mi">88</span>
<span class="mi">421</span>        <span class="err">梦</span>   <span class="mi">85</span>
<span class="mi">203</span>    <span class="err">工作室</span>   <span class="mi">78</span>
<span class="mi">408</span>      <span class="err">妈妈</span>   <span class="mi">75</span>
<span class="mi">843</span>      <span class="err">助理</span>   <span class="mi">64</span>
<span class="mi">711</span>        <span class="err">心</span>   <span class="mi">53</span>
<span class="mi">305</span>      <span class="err">键盘</span>   <span class="mi">51</span>
<span class="mi">293</span>      <span class="err">吉他</span>   <span class="mi">50</span>
<span class="mi">589</span>      <span class="err">世界</span>   <span class="mi">50</span>
<span class="mi">164</span>        <span class="err">风</span>   <span class="mi">45</span>
<span class="mi">148</span>      <span class="err">方向</span>   <span class="mi">40</span>
<span class="mi">627</span>      <span class="err">天空</span>   <span class="mi">39</span>
<span class="mi">528</span>      <span class="err">人们</span>   <span class="mi">37</span>
<span class="mi">227</span>      <span class="err">孩子</span>   <span class="mi">36</span>
<span class="mi">1</span>        <span class="err">爱情</span>   <span class="mi">33</span>
<span class="mi">804</span>        <span class="err">雨</span>   <span class="mi">33</span>
<span class="mi">784</span>      <span class="err">意义</span>   <span class="mi">32</span>
<span class="mi">386</span>      <span class="err">灵魂</span>   <span class="mi">29</span>
<span class="mi">582</span>      <span class="err">时光</span>   <span class="mi">28</span>
<span class="mi">783</span>      <span class="err">意思</span>   <span class="mi">28</span>
<span class="mi">92</span>       <span class="err">大地</span>   <span class="mi">26</span>
<span class="mi">201</span>      <span class="err">工程</span>   <span class="mi">26</span>
<span class="mi">397</span>    <span class="err">录音室</span>   <span class="mi">26</span>
<span class="mi">467</span>      <span class="err">朋友</span>   <span class="mi">26</span>
<span class="mi">396</span>    <span class="err">录音棚</span>   <span class="mi">24</span>
<span class="mi">767</span>      <span class="err">阳光</span>   <span class="mi">24</span>

<span class="o">#</span><span class="err">形容词和副词</span>
 <span class="n">aWords</span> <span class="n">Freq</span>
 <span class="mi">63</span>    <span class="err">孤独</span>   <span class="mi">65</span>
 <span class="mi">144</span>   <span class="err">美丽</span>   <span class="mi">42</span>
 <span class="mi">268</span>   <span class="err">自由</span>   <span class="mi">37</span>
 <span class="mi">151</span>   <span class="err">迷惘</span>   <span class="mi">32</span>
 <span class="mi">178</span>   <span class="err">亲爱</span>   <span class="mi">32</span>
 <span class="mi">51</span>    <span class="err">疯狂</span>   <span class="mi">28</span>
 <span class="mi">90</span>    <span class="err">坚强</span>   <span class="mi">27</span>
 <span class="mi">12</span>    <span class="err">悲伤</span>   <span class="mi">24</span>
 <span class="mi">22</span>    <span class="err">灿烂</span>   <span class="mi">24</span>
 <span class="mi">236</span>   <span class="err">幸福</span>   <span class="mi">21</span>
 <span class="mi">85</span>    <span class="err">辉煌</span>   <span class="mi">17</span>
 <span class="mi">206</span>     <span class="err">碎</span>   <span class="mi">16</span>
 <span class="mi">246</span>   <span class="err">勇敢</span>   <span class="mi">16</span>
 <span class="mi">88</span>    <span class="err">寂寞</span>   <span class="mi">15</span>
 <span class="mi">48</span>    <span class="err">繁华</span>   <span class="mi">14</span>
 <span class="mi">102</span>     <span class="err">紧</span>   <span class="mi">14</span>
 <span class="mi">150</span>   <span class="err">迷茫</span>   <span class="mi">14</span>
 <span class="mi">14</span>    <span class="err">蹩脚</span>   <span class="mi">13</span>
 <span class="mi">42</span>      <span class="err">大</span>   <span class="mi">13</span>
 <span class="mi">56</span>      <span class="err">高</span>   <span class="mi">13</span>
 <span class="mi">111</span>     <span class="err">倦</span>   <span class="mi">13</span>
 <span class="mi">113</span>   <span class="err">绝望</span>   <span class="mi">13</span>
 <span class="mi">125</span>   <span class="err">快乐</span>   <span class="mi">13</span>
 <span class="mi">31</span>    <span class="err">炽热</span>   <span class="mi">12</span>
 <span class="mi">132</span>     <span class="err">乐</span>   <span class="mi">12</span>
 <span class="mi">251</span>     <span class="err">远</span>   <span class="mi">12</span>
 <span class="mi">257</span>   <span class="err">真实</span>   <span class="mi">12</span>
 <span class="mi">26</span>      <span class="err">长</span>   <span class="mi">11</span>
 <span class="mi">70</span>      <span class="err">好</span>   <span class="mi">11</span>
 <span class="mi">172</span>   <span class="err">平静</span>   <span class="mi">11</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>最后肯定要总结下，要不然就文不对题了。</p>

<ul>
  <li>其实汪峰歌还是很好的，就算不是Music King，可人家在章子怡心中就是King啊。</li>
  <li>章子怡很漂亮的，我基本不黑漂亮的女孩。</li>
  <li>那些把Music King翻译成“音帝”的人，你东西掉了……</li>
</ul>

<p>嗯，差不多就这样。PS：这代码的显示太差劲了，等这个周末以后得把版面改改了。</p>
