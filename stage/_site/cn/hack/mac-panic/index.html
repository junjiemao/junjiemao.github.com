<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Mac的奔溃 &#8211; HatMatrix</title>
<meta name="description" content="">
<meta name="keywords" content="Mac, 硬件">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Mac的奔溃">
<meta property="og:description" content="">
<meta property="og:url" content="/cn/hack/mac-panic/">
<meta property="og:site_name" content="HatMatrix">





<link rel="canonical" href="/cn/hack/mac-panic/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="HatMatrix Feed">
<link rel="author" href="https://plus.google.com/114197058213583759973/?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
	        
			<li>
				
					<a href="/about/">About</a>
				 
			</li>
	        
			<li>
				
					<a href="/articles/">Articles</a>
				 
			</li>
	        
			<li>
				
					<a href="/project/">Project</a>
				 
			</li>
	        
			<li>
				
					<a href="/slides/">Slides</a>
				 
			</li>
	        
	        <li><a href="/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Search...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
		<a href="" class="site-logo" rel="home" title="HatMatrix"><img src="/images/site-logo.png" width="200" height="200" alt="HatMatrix logo" class="animated fadeInUp"></a>
		<h1 class="site-title animated fadeIn"><a href="">HatMatrix</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Statistics,Program & Life</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="/tags.html#Mac" title="Pages tagged Mac">Mac</a>&nbsp;&bull;&nbsp;<a href="/tags.html#硬件" title="Pages tagged 硬件">硬件</a></span>
        
          <h1 class="entry-title">Mac的奔溃</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="/images/bio-photo.jpg" alt="HatMatrix photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="/about/" title="About HatMatrix">HatMatrix</a></span></span>
        <span class="entry-date date published"><time datetime="2022-01-25T00:00:00+00:00"><i class="icon-calendar-empty"></i> January 25, 2022</time></span>
        
        
        <span><a href="/cn/hack/mac-panic/" rel="bookmark" title="Mac的奔溃"><i class="icon-link"></i> Permalink</a></span>
        
        <span class="social-share-facebook">
            <a href="https://www.facebook.com/sharer/sharer.php?u=/cn/hack/mac-panic/" title="Share on Facebook" itemprop="Facebook"><i class="icon-facebook-sign"></i> Like</a></span>
        <span class="social-share-twitter">
            <a href="https://twitter.com/intent/tweet?text=/cn/hack/mac-panic/" title="Share on Twitter" itemprop="Twitter"><i class="icon-twitter-sign"></i> Tweet</a></span>
        <span class="social-share-googleplus">
            <a href="https://plus.google.com/share?url=/cn/hack/mac-panic/" title="Share on Google Plus" itemprop="GooglePlus"><i class="icon-google-plus-sign"></i> +1</a></span>
            <!-- /.social-share -->
      </footer>
      <div class="entry-content">
        <p>最近一台MBP15在合盖后出现无法唤醒的情况，并且是必现。</p>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">{&quot;timestamp&quot;:&quot;2021-11-08 23:41:04.00 +0800&quot;,&quot;bug_type&quot;:&quot;210&quot;,&quot;os_version&quot;:&quot;macOS 12.0.1 (21A559)&quot;,&quot;incident_id&quot;:&quot;4AE1F716-38C1-4316-BD49-F1D471C18843&quot;}
{&quot;macOSProcessedStackshotData&quot;:&quot;bm8gb24gZGlzayBwYW5pYyBzdGFja3Nob3QgZm91bmQgaW4gY29yZWZpbGU=&quot;,&quot;macOSPanicString&quot;:&quot;panic(cpu 0 caller 0xffffff8000a411e1): AppleAHCIDiskQueueManager::setPowerState(0xffffff852c0e4480 : 0xffffff8002967d08, 0 -&gt; 3) timed out after 101008 ms @IOServicePM.cpp:5524\nPanicked task 0xffffff852b7986a0: 143 threads: pid 0: kernel_task\nBacktrace (CPU 0), panicked thread: 0xffffff852e7efb70, Frame : Return Address\n0xffffffd05babbab0 : 0xffffff800029c00d \n0xffffffd05babbb00 : 0xffffff80003f5d85 \n0xffffffd05babbb40 : 0xffffff80003e5763 \n0xffffffd05babbb90 : 0xffffff800023ba60 \n0xffffffd05babbbb0 : 0xffffff800029c3dd \n0xffffffd05babbcd0 : 0xffffff800029bb96 \n0xffffffd05babbd30 : 0xffffff8000b18649 \n0xffffffd05babbda0 : 0xffffff8000a411e1 \n0xffffffd05babbe00 : 0xffffff8000a409a9 \n0xffffffd05babbe10 : 0xffffff8000a59f8e \n0xffffffd05babbe50 : 0xffffff8000a3f738 \n0xffffffd05babbe70 : 0xffffff80002ecc85 \n0xffffffd05babbee0 : 0xffffff80002edcd2 \n0xffffffd05babbfa0 : 0xffffff800023b18e \n\nProcess name corresponding to current thread (0xffffff852e7efb70): kernel_task\nBoot args: -x\n\nMac OS version:\n21A559\n\nKernel version:\nDarwin Kernel Version 21.1.0: Wed Oct 13 17:33:23 PDT 2021; root:xnu-8019.41.5~1\/RELEASE_X86_64\nKernel UUID: 19BD4E1B-0268-3EE0-BC66-91F035BC9429\nKernelCache slide: 0x0000000000000000\nKernelCache base:  0xffffff8000200000\nKernel slide:      0x0000000000010000\nKernel text base:  0xffffff8000210000\n__HIB  text base: 0xffffff8000100000\nSystem model name: MacBookPro11,4 (Mac-06F11FD93F0323C5)\nSystem shutdown begun: NO\nPanic diags file available: YES (0x0)\nHibernation exit count: 0\n\nSystem uptime in nanoseconds: 151322306693\nLast Sleep:           absolute           base_tsc          base_nano\n  Uptime  : 0x000000233b833879\n  Sleep   : 0x0000000b274b6469 0x00000002b32b98f2 0x0000000000000000\n  Wake    : 0x0000000b39fc449c 0x00000000957143c8 0x0000000b30a1c483\nZone info:\nForeign   : 0xffffff80058f2000 - 0xffffff80058ff000\nNative    : 0xffffff801de35000 - 0xffffffa01de35000\nReadonly  : 0 - 0\nMetadata  : 0xffffffd2f0113000 - 0xffffffd310299000\nBitmaps   : 0xffffffd310299000 - 0xffffffd316299000\nlast started kext at 6912107645: &gt;AGPM\t125 (addr 0xffffff7f96fa0000, size 122880)\nloaded kexts:\n&gt;AGPM\t125\n&gt;X86PlatformShim\t1.0.0\n@filesystems.autofs\t3.0\n&gt;!ALPC\t3.1\n&gt;!AMuxControl\t6.4.9\n&gt;!AGraphicsDevicePolicy\t6.4.9\n&gt;AGDCBacklightControl\t6.4.9\n&gt;!ADiskImages2\t126.40.1\n&gt;!ABacklight\t180.3\n&gt;!AMCCSControl\t1.14\n&gt;!A!IFramebufferAzul\t18.0.2\n&gt;ACPI_SMC_PlatformPlugin\t1.0.0\n|SCSITaskUserClient\t452.30.4\n&gt;!ATopCaseHIDEventDriver\t5010.1\n&gt;!UTopCaseDriver\t5010.1\n&gt;!UCardReader\t532.40.7\n@filesystems.apfs\t1933.41.2\n&gt;AirPort.BrcmNIC\t1400.1.1\n&gt;!AAHCIPort\t351\n&gt;!AFileSystemDriver\t3.0.1\n@filesystems.tmpfs\t1\n@filesystems.lifs\t1\n@filesystems.hfs.kext\t582.40.4\n@BootCache\t40\n@!AFSCompression.!AFSCompressionTypeZlib\t1.0.0\n@!AFSCompression.!AFSCompressionTypeDataless\t1.0.0d1\n@private.KextAudit\t1.0\n&gt;!AACPIButtons\t6.1\n&gt;!ARTC\t2.0.1\n&gt;!ASmartBatteryManager\t161.0.0\n&gt;!AHPET\t1.8\n&gt;!ASMBIOS\t2.1\n&gt;!AACPIEC\t6.1\n&gt;!AAPIC\t1.7\n@!ASystemPolicy\t2.0.0\n@nke.applicationfirewall\t402\n|IOKitRegistryCompatibility\t1\n|EndpointSecurity\t1\n@Dont_Steal_Mac_OS_X\t7.0.0\n@kec.!AEncryptedArchive\t1\n@kext.triggers\t1.0\n&gt;!ASMBusPCI\t1.0.14d1\n&gt;!AGraphicsControl\t6.4.9\n&gt;!ABacklightExpert\t1.1.0\n|IONDRVSupport\t593\n&gt;!ASMBus!C\t1.0.18d1\n@!AGPUWrangler\t6.4.9\n|IOAccelerator!F2\t462.4\n@!AGraphicsDeviceControl\t6.4.9\n|IOGraphics!F\t593\n&gt;IOPlatformPluginLegacy\t1.0.0\n&gt;X86PlatformPlugin\t1.0.0\n&gt;IOPlatformPlugin!F\t6.0.0d8\n&gt;!AActuatorDriver\t5400.25\n&gt;!AHS!BDriver\t5010.1\n&gt;IO!BHIDDriver\t9.0.0\n&gt;!AMultitouchDriver\t5400.25\n&gt;!AInputDeviceSupport\t5400.30\n&gt;!AHIDKeyboard\t228\n&gt;usb.IOUSBHostHIDDevice\t1.2\n&gt;usb.cdc\t5.0.0\n&gt;usb.networking\t5.0.0\n&gt;usb.!UHostCompositeDevice\t1.2\n&gt;!AThunderboltDPInAdapter\t8.5.0\n&gt;!AThunderboltDPAdapter!F\t8.5.0\n&gt;!AThunderboltPCIDownAdapter\t4.1.1\n&gt;!AXsanScheme\t3\n&gt;!AThunderboltNHI\t7.2.8\n|IOThunderbolt!F\t9.3.2\n|IOAHCIBlock!S\t333\n|IO80211!FLegacy\t1200.12.2b1\n|IOSkywalk!F\t1.0\n&gt;mDNSOffloadUserClient\t1.0.1b8\n&gt;corecapture\t1.0.4\n&gt;!A!ILpssGspi\t3.0.60\n|IOAHCI!F\t295\n&gt;usb.!UXHCIPCI\t1.2\n&gt;usb.!UXHCI\t1.2\n&gt;!ABSDKextStarter\t3\n|IOSurface\t302.9\n@filesystems.hfs.encodings.kext\t1\n&gt;usb.!UHostPacketFilter\t1.0\n|IOUSB!F\t900.4.2\n&gt;!AEFINVRAM\t2.1\n&gt;!AEFIRuntime\t2.1\n|IOSMBus!F\t1.1\n|IOHID!F\t2.0.0\n|IOTimeSync!F\t1000.11\n|IONetworking!F\t3.4\n&gt;DiskImages\t493.0.0\n|IO!B!F\t9.0.0\n|IOReport!F\t47\n$quarantine\t4\n$sandbox\t300.0\n@kext.!AMatch\t1.0.0d1\n|CoreAnalytics!F\t1\n&gt;!ASSE\t1.0\n&gt;!AKeyStore\t2\n&gt;!UTDM\t532.40.7\n|IOUSBMass!SDriver\t209.40.6\n|IOSCSIBlockCommandsDevice\t452.30.4\n|IO!S!F\t2.1\n|IOSCSIArchitectureModel!F\t452.30.4\n&gt;!AMobileFileIntegrity\t1.0.5\n$!AImage4\t4.1.0\n@kext.CoreTrust\t1\n&gt;!AFDEKeyStore\t28.30\n&gt;!AEffaceable!S\t1.0\n&gt;!ACredentialManager\t1.0\n&gt;KernelRelayHost\t1\n|IOUSBHost!F\t1.2\n&gt;!UHostMergeProperties\t1.2\n&gt;usb.!UCommon\t1.0\n&gt;!ABusPower!C\t1.0\n&gt;!ASEPManager\t1.0.1\n&gt;IOSlaveProcessor\t1\n&gt;!AACPIPlatform\t6.1\n&gt;!ASMC\t3.1.9\n|IOPCI!F\t2.9\n|IOACPI!F\t1.4\n&gt;watchdog\t1\n@kec.pthread\t1\n@kec.Libm\t1\n@kec.corecrypto\t12.0\n\n\n&quot;}
System Profile:
Network Service: Wi-Fi, AirPort, en0
Serial ATA Device: APPLE SSD SM0256G, 251 GB
Thunderbolt Bus: MacBook Pro, Apple Inc., 27.1
Boot Volume File System Type: apfs
Memory Module: BANK 0/DIMM0, 8 GB, DDR3, 1600 MHz, 0x80AD, 0x484D54343147533642465238412D50422020
Memory Module: BANK 1/DIMM0, 8 GB, DDR3, 1600 MHz, 0x80AD, 0x484D54343147533642465238412D50422020
USB Device: USB30Bus
USB Device: Apple Internal Keyboard / Trackpad
USB Device: Bluetooth USB Host Controller
Display: Color LCD, 2880 x 1800 Retina, Main, MirrorOff, Online
Model: MacBookPro11,4, BootROM 428.40.10.0.0, 4 processors, Quad-Core Intel Core i7, 2.2 GHz, 16 GB, SMC 2.29f24
Graphics: Intel Iris Pro, Intel Iris Pro, Built-In
AirPort: spairport_wireless_card_type_wifi (0x14E4, 0x152), Broadcom BCM43xx 1.0 (7.77.111.1 AirPortDriverBrcmNIC-1710.2)
AirPort: 
Bluetooth: Version (null), 0 services, 0 devices, 0 incoming serial ports</code></pre></figure>

<p>看报错是AHCIDiskQueueManager出现了问题，考虑到最近做了几个变动：</p>
<ul>
  <li>因为需要读取NTFS硬盘数据，安装了Paragon NTFS</li>
  <li>升级了Big Sur</li>
</ul>

<p>怀疑是以上的原因导致的。在咨询了Apple的客服，把重置SMC、NVRAM、PRAM三连了一遍，并且还回滚了系统，问题仍然没有得到解决，Apple客服无奈地表示只能去店里拆机看看有没有故障。</p>

<p>但是作为一个不想花时间去店里检修一台快要报废的电脑的懒人，决定自己拆机器搞定，Google了一堆资料，问题都指向了一个点–SSD可能坏了。于是拆机断电，拔下SSD清理了灰尘装回。能不能恢复不抱希望，做好了换SSD的打算。结果出乎意料地恢复了。</p>

<p>于是，在本老古董MBP15上水了一篇Blog。</p>

<p>–EOF</p>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="/cn/say-goodbye-2017-copy/" class="btn" title="再见2017">Previous article</a>
      
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2022 HatMatrix. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">So Simple Theme</a>.</span>
<div class="social-icons">
	
	
	<a href="https://plus.google.com/114197058213583759973/" title="HatMatrix on Google+" target="_blank"><i class="icon-google-plus icon-2x"></i></a>
	
	
	
	
	<a href="http://github.com/junjiemao" title="HatMatrix on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : '/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-47366287-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
